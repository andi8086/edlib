;-------------------------------------------------------------------------------
; Purpose:      Waits for vertical retrace.
;-------------------------------------------------------------------------------
; Destroys:     AL, DX.
;-------------------------------------------------------------------------------
; Requirements: None.
;-------------------------------------------------------------------------------
; Parameters:   None.
;-------------------------------------------------------------------------------
; Returns:      None.
;-------------------------------------------------------------------------------
; Comments:     Version 2, the first one was bugged.
;-------------------------------------------------------------------------------
Vertical        proc
                mov     dx,3dah
Vert10:         in      al,dx
                test    al,8
                jz      Vert10
                cli
Vert20:         in      al,dx
                test    al,8
                jnz     Vert20
                sti
                ret
                endp
